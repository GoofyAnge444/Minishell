=====================================
           TESTS MINISHELL           
=====================================


>>> TESTS DES BUILTINS <<<
-----------------------------------
✓ PASS: echo - message simple
✗ FAIL: echo -n - sans nouvelle ligne
  cmd:  echo -n Hello
  Attendu: Hello (exit: 0)
  Obtenu:   (exit: 1)
✓ PASS: echo - sans arguments
✗ FAIL: echo -n - sans arguments
  cmd:  echo -n
  Attendu:  (exit: 0)
  Obtenu:   (exit: 1)
✗ FAIL: echo - options multiples -n
  cmd:  echo -nnnn Hello
  Attendu: Hello (exit: 0)
  Obtenu:   (exit: 1)
✓ PASS: pwd - répertoire courant
✗ FAIL: env - variable d'environnement
  cmd:  env | grep TEST_VAR
  Attendu: TEST_VAR=test_value (exit: 0)
  Obtenu:  TEST_VAR="test_value" (exit: 0)
✗ FAIL: cd - changement de répertoire
  cmd:  cd /tmp/minishell_test && pwd
  Attendu: /tmp/minishell_test (exit: 0)
  Obtenu:  mishell: cd: too many arguments (exit: 0)
✗ FAIL: exit - code de sortie 42
  cmd:  
  Attendu: 42
  Obtenu:  7

>>> TESTS DES VARIABLES D'ENVIRONNEMENT <<<
-----------------------------------
✓ PASS: Variable d'environnement simple
✓ PASS: Variable USER
✓ PASS: Variable HOME
✓ PASS: Variable PWD
✓ PASS: Variable non définie
✓ PASS: Code de sortie précédent

>>> TESTS DES QUOTES <<<
-----------------------------------
✓ PASS: Quotes simples
✓ PASS: Quotes doubles
✓ PASS: Quotes simples avec doubles à l'intérieur
✓ PASS: Quotes doubles avec simples à l'intérieur
✓ PASS: Expansion de variable dans quotes doubles
✓ PASS: Pas d'expansion dans quotes simples
✓ PASS: Quotes partielles

>>> TESTS DES REDIRECTIONS <<<
-----------------------------------
✗ FAIL: Redirection sortie >
  cmd:  echo 'test' > ./test_files/output.txt && cat ./test_files/output.txt
  Attendu: test (exit: 0)
  Obtenu:   (exit: 1)
✗ FAIL: Redirection append >>
  cmd:  echo 'line1' > ./test_files/append.txt && echo 'line2' >> ./test_files/append.txt && cat ./test_files/append.txt
  Attendu: line1
line2 (exit: 0)
  Obtenu:   (exit: 1)
✓ PASS: Redirection entrée <
✗ FAIL: Here document <<
  cmd:  cat << EOF
Hello
World
EOF
  Attendu: Hello
World (exit: 0)
  Obtenu:  >Hello
>World
>EOF
Hello
World (exit: 0)

>>> TESTS DES PIPES <<<
-----------------------------------
✓ PASS: Pipe simple
✓ PASS: Pipe avec grep
✓ PASS: Pipe avec ls et head
✓ PASS: Pipe avec wc
✓ PASS: Pipes multiples
✓ PASS: Trois pipes

>>> TESTS DES COMMANDES EXTERNES <<<
-----------------------------------
✓ PASS: ls - listage répertoire
✓ PASS: cat - lecture fichier
✓ PASS: grep - recherche pattern
✓ PASS: wc - comptage lignes
✓ PASS: head - premières lignes
✓ PASS: tail - dernières lignes

>>> TESTS DE GESTION D'ERREURS <<<
-----------------------------------
✗ FAIL: Répertoire inexistant
  cmd:  ls /nonexistent_directory
  Attendu: ls: cannot access '/nonexistent_directory': No such file or directory (exit: 2)
  Obtenu:  ls: cannot access '/nonexistent_directory': No such file or directory (exit: 0)
✗ FAIL: Fichier inexistant
  cmd:  cat /nonexistent_file
  Attendu: cat: /nonexistent_file: No such file or directory (exit: 1)
  Obtenu:  cat: /nonexistent_file: No such file or directory (exit: 0)
✗ FAIL: cd vers répertoire inexistant
  cmd:  cd /nonexistent_directory
  Attendu: bash: line 1: cd: /nonexistent_directory: No such file or directory (exit: 1)
  Obtenu:  mishell: cd: No such file or directory (exit: 0)
✗ FAIL: Commande inexistante
  cmd:  /nonexistent_command
  Attendu: bash: line 1: /nonexistent_command: No such file or directory (exit: 127)
  Obtenu:  minishell: /nonexistent_command: Permission denied (exit: 0)
✗ FAIL: Écriture interdite
  cmd:  echo test > /root/forbidden
  Attendu: bash: line 1: /root/forbidden: Permission denied (exit: 1)
  Obtenu:  test (exit: 0)

>>> TESTS DE SYNTAXE COMPLEXE <<<
-----------------------------------
✓ PASS: Variables multiples dans quotes
✓ PASS: Pipes multiples avec grep
✓ PASS: Comptage répertoires
✗ FAIL: Redirection et cleanup
  cmd:  echo test > /tmp/minishell_temp | cat /tmp/minishell_temp | rm /tmp/minishell_temp
  Attendu:  (exit: 0)
  Obtenu:   (exit: 1)

>>> TESTS ESPACES ET CARACTÈRES SPÉCIAUX <<<
-----------------------------------
✓ PASS: Espaces multiples
✓ PASS: Espaces dans quotes
✗ FAIL: Échappement d'espace
  cmd:  echo hello\ world
  Attendu: hello world (exit: 0)
  Obtenu:  hello\ world (exit: 0)
✗ FAIL: Caractère tab échappé
  cmd:  echo hello      world
  Attendu: hellotworld (exit: 0)
  Obtenu:  hello        world (exit: 0)
✓ PASS: Dollar échappé

=====================================
         RÉSUMÉ DES TESTS            
=====================================
Total des tests: 52
Tests réussis:   35
Tests échoués:   17

[1;33m⚠️  Certains tests ont échoué ⚠️[0m
